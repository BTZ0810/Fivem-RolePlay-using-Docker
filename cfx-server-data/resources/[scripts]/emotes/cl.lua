-- more emotes available at https://pastebin.com/6mrYTdQv
local emotes = {    
    ---------------Animções para Trabalhos-------------
            ['Pescar'] = "WORLD_HUMAN_STAND_FISHING",
            ['Cavar'] = "world_human_gardener_plant",
            ['Exibida'] = "WORLD_HUMAN_PROSTITUTE_HIGH_CLASS",
            ['Se_Achando'] = "WORLD_HUMAN_PROSTITUTE_LOW_CLASS",
            -------------ACADEMIA----------------
            ['Flexao'] = "WORLD_HUMAN_PUSH_UPS",
            ['Peso'] = "WORLD_HUMAN_MUSCLE_FREE_WEIGHTS",
            ['Fumar'] = "WORLD_HUMAN_SMOKING",
            ['Policial'] = "WORLD_HUMAN_COP_IDLES",
            ['Encostar'] = "WORLD_HUMAN_LEANING",
            ['Chao'] = "WORLD_HUMAN_PICNIC",
            ['Descancar'] = "WORLD_HUMAN_STUPOR",
            ['Sol'] = "WORLD_HUMAN_SUNBATHE_BACK",
            ['Tomar sol'] = "WORLD_HUMAN_SUNBATHE",
            ['Curar'] = "CODE_HUMAN_MEDIC_TEND_TO_DEAD",
            ['Anotar'] = "WORLD_HUMAN_CLIPBOARD",
            ['Festa'] = "WORLD_HUMAN_PARTYING",
            ['Observar'] = "CODE_HUMAN_MEDIC_KNEEL",
            ['Anotacao'] = "CODE_HUMAN_MEDIC_TIME_OF_DEATH",
            ['Maconha'] = "WORLD_HUMAN_SMOKING_POT",
            ['Impaciente'] = "WORLD_HUMAN_STAND_IMPATIENT",
            ['Soldar'] = "WORLD_HUMAN_WELDING",
            ['Foto'] = "WORLD_HUMAN_PAPARAZZI",
            ['Filmadora'] = "WORLD_HUMAN_MOBILE_FILM_SHOCKING",
            ['Alegria'] = "WORLD_HUMAN_CHEERING",
            ['Binoculos'] = "WORLD_HUMAN_BINOCULARS",
            ['Musculos'] = "WORLD_HUMAN_MUSCLE_FLEX",
            ['Yoga'] = "WORLD_HUMAN_YOGA",
            ['Ajuda'] = "WORLD_HUMAN_BUM_FREEWAY",
            ['Dormir'] = "WORLD_HUMAN_BUM_SLUMPED",
            ['Bobo'] = "WORLD_HUMAN_BUM_STANDING",
            ['Banho'] = "WORLD_HUMAN_BUM_WASH",
            ['Transito'] = "WORLD_HUMAN_CAR_PARK_ATTENDANT",
            ['Palmas'] = "WORLD_HUMAN_CHEERING",
            ['Cigarro'] = "WORLD_HUMAN_AA_SMOKE",
            ['Furadeira'] = "WORLD_HUMAN_CONST_DRILL",
            ['Beber'] = "WORLD_HUMAN_DRINKING",
            ['Maconha'] = "WORLD_HUMAN_DRUG_DEALER",
            ['Cheirar'] = "WORLD_HUMAN_DRUG_DEALER_HARD",
            ['Selfie'] = "WORLD_HUMAN_MOBILE_FILM_SHOCKING",
            ['Jardineiro'] = "WORLD_HUMAN_GARDENER_LEAF_BLOWER",
            ['Golf'] = "WORLD_HUMAN_GOLF_PLAYER",
            ['Patrol'] = "WORLD_HUMAN_GUARD_PATROL",
            ['Guarda'] = "WORLD_HUMAN_GUARD_STAND",
            ['Martelo'] = "WORLD_HUMAN_HAMMERING",
            ['Viu'] = "WORLD_HUMAN_HANG_OUT_STREET",
            ['Statue'] = "WORLD_HUMAN_HUMAN_STATUE",
            ['Varrer'] = "WORLD_HUMAN_JANITOR",
            ['Corrida'] = "WORLD_HUMAN_JOG_STANDING",
            ['Parede'] = "WORLD_HUMAN_LEANING",
            ['Limpar'] = "WORLD_HUMAN_MAID_CLEAN",
            ['Alongar'] = "WORLD_HUMAN_MUSCLE_FLEX",
            ['Muscle'] = "WORLD_HUMAN_MUSCLE_FREE_WEIGHTS",
            ['Musico'] = "WORLD_HUMAN_MUSICIAN",
            ['Paparazzi'] = "WORLD_HUMAN_PAPARAZZI",
            ['Cerveja'] = "WORLD_HUMAN_PARTYING",
            ['Prostitue'] = "WORLD_HUMAN_PROSTITUTE_HIGH_CLASS",
            ['Esquina'] = "WORLD_HUMAN_PROSTITUTE_LOW_CLASS",
            ['Cacao'] = "WORLD_HUMAN_SEAT_LEDGE",
            ['Subir'] = "WORLD_HUMAN_SEAT_STEPS",
            ['Murreta'] = "WORLD_HUMAN_SEAT_WALL",
            ['Lanterna'] = "WORLD_HUMAN_SECURITY_SHINE_TORCH",
            ['Abdominal'] = "WORLD_HUMAN_SIT_UPS",
            ['Fumadinha'] = "WORLD_HUMAN_SMOKING",
            ['Ponta'] = "WORLD_HUMAN_SMOKING_POT",
            ['Esquentar'] = "WORLD_HUMAN_STAND_FIRE",
            ['Fishing'] = "WORLD_HUMAN_STAND_FISHING",
            ['Pensando'] = "WORLD_HUMAN_STAND_IMPATIENT_UPRIGHT",
            ['Mobile'] = "WORLD_HUMAN_STAND_MOBILE",
            ['Celular'] = "WORLD_HUMAN_STAND_MOBILE_UPRIGHT",
            ['Stripclub'] = "WORLD_HUMAN_STRIP_WATCH_STAND",
            ['Stupor'] = "WORLD_HUMAN_STUPOR",
            ['Sunbathe'] = "WORLD_HUMAN_SUNBATHE",
            ['Deitar'] = "WORLD_HUMAN_SUNBATHE_BACK",
            ['Tennis'] = "WORLD_HUMAN_TENNIS_PLAYER",
            ['Turista'] = "WORLD_HUMAN_TOURIST_MAP",
            ['TMobile'] = "WORLD_HUMAN_TOURIST_MOBILE",
            ['Motor'] = "WORLD_HUMAN_VEHICLE_MECHANIC",
            ['Window'] = "WORLD_HUMAN_WINDOW_SHOP_BROWSE",
            ['Yoga'] = "WORLD_HUMAN_YOGA",
            ['ATM'] = "PROP_HUMAN_ATM",
            ['Churrasco'] = "PROP_HUMAN_BBQ",
            ['Parafusso'] = "PROP_HUMAN_BUM_BIN",
            ['Debrucar'] = "PROP_HUMAN_BUM_SHOPPING_CART",
            ['Barras'] = "PROP_HUMAN_MUSCLE_CHIN_UPS",
            ['Queisso'] = "PROP_HUMAN_PARKING_METER",
            ['Bar'] = "PROP_HUMAN_SEAT_BAR",
            ['Chair'] = "PROP_HUMAN_SEAT_CHAIR",
            ['Folgado'] = "PROP_HUMAN_SEAT_DECKCHAIR",
            ['Braco'] = "PROP_HUMAN_SEAT_MUSCLE_BENCH_PRESS_PRISON",
            ['Braco2'] = "PROP_HUMAN_SEAT_MUSCLE_BENCH_PRESS",
            ['BanhoSol'] = "PROP_HUMAN_SEAT_SUNLOUNGER",
            ['Olhando'] = "CODE_HUMAN_CROSS_ROAD_WAIT",
            ['Analizar'] = "CODE_HUMAN_MEDIC_KNEEL",
            ['Multa'] = "CODE_HUMAN_MEDIC_TIME_OF_DEATH",
            ['Acalmar'] = "CODE_HUMAN_POLICE_CROWD_CONTROL",
            ['Investigar'] = "CODE_HUMAN_POLICE_INVESTIGATE"




}

--[[------------------------------------------------------------------------------------------------

                    DON'T TOUCH BELOW THIS UNLESS YOU KNOW WHAT YOU ARE DOING

------------------------------------------------------------------------------------------------]]--

-- Draws a simple notification
function drawNotification(text)
    SetNotificationTextEntry("STRING")
    AddTextComponentString(text)
    DrawNotification(false, false)
end

-- Registering all of the events called by the server
RegisterNetEvent("emote:invoke")
RegisterNetEvent("emote:cancelnow")
RegisterNetEvent("emote:display")

local emotePlaying = IsPedActiveInScenario(GetPlayerPed(-1)) -- Registering whether or not the player is in an active scenario


function cancelEmote() -- Cancels the emote slowly
    ClearPedTasks(GetPlayerPed(-1))
    emotePlaying = false
end
function cancelEmoteNow() -- Cancels the emote immediately
    ClearPedTasksImmediately(GetPlayerPed(-1))
    emotePlaying = false
end

function displayEmotes()
    local index = 0 -- Current index
    local display = "^2" -- Text to display

    for name, value in pairs(emotes) do -- Adding the emote names to the display var
        index = index + 1
        if index == 1 then
            display = display..name
        else
            display = display..", "..name
        end
    end

    TriggerEvent("chatMessage", "ANIMACOES: /animar <nome da animacao>", {255,0,0}, "") -- Saying "EMOTES:" in red
    TriggerEvent("chatMessage", "", {0,0,0}, display) -- Displaying the emotes in white
end
function playEmote(emoteDic) -- Plays an emote from the given name dictionary
    if not DoesEntityExist(GetPlayerPed(-1)) then -- Return of the ped doesn't exist
        return false
    end

    if IsPedInAnyVehicle(GetPlayerPed(-1)) then -- Returns if the player is in any vehicle
        drawNotification("~r~Você deve deixar o veículo primeiro")
        return false
    end

    local pedHoldingWeapon = IsPedArmed(GetPlayerPed(-1), 7)
    if pedHoldingWeapon then -- If the player is holding weapon, remove it
        SetCurrentPedWeapon(GetPlayerPed(-1), 0xA2719263, true)
        drawNotification("Por favor, coloque sua arma na próxima vez!")
    end

    TaskStartScenarioInPlace(GetPlayerPed(-1), emoteDic, 0, true) -- Start the scenario
    emotePlaying = true
    return true
end

AddEventHandler("emote:invoke", function(name)
    if emotes[name] ~= nil then -- Checking if the name is in the dictionary
        if playEmote(emotes[name]) then -- Playing the emote from the dictionary
            drawNotification("Fazendo Animções \""..name.."\"")
        end
    else
        TriggerEvent("chatMessage", "ERROR", {255,0,0}, "Nome de Animção inválido") -- Saying if the name wasn't in the dictionary
    end
end)
AddEventHandler("emote:display", function()
    displayEmotes() -- Displays all of the emotes
end)
AddEventHandler("emote:cancelnow", function()
    cancelEmoteNow() -- Cancels the emote immediately
end)

Citizen.CreateThread(function()
    while true do

        if emotePlaying then
            if (IsControlPressed(0, 32) or IsControlPressed(0, 33) or IsControlPressed(0, 34) or IsControlPressed(0, 35)) then
                cancelEmote() -- Cancels the emote if the player is moving
            end
        end

        Citizen.Wait(0)
    end
end)